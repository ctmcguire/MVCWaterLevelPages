<!doctype html>
<html>
	<head>
		<title>
			Level and Flow Data
		</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"/>
		<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.2.0/dist/MarkerCluster.css"/>
		<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.2.0/dist/MarkerCluster.Default.css"/>
		<link rel="stylesheet" href="https://unpkg.com/leaflet.defaultextent@0.0.2/dist/leaflet.defaultextent.css"/>
		<link rel="stylesheet" href="https://unpkg.com/leaflet-easybutton@2.3.0/src/easy-button.css"/>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>

		<script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
		<!-- Load Esri Leaflet from CDN -->
		<script src="https://unpkg.com/esri-leaflet@2.1.2/dist/esri-leaflet.js"></script>
		<script src="https://unpkg.com/leaflet.markercluster@1.2.0/dist/leaflet.markercluster.js"></script>
		<script src="https://unpkg.com/esri-leaflet-cluster@2.0.0/dist/esri-leaflet-cluster.js"></script>
		<script src="https://unpkg.com/leaflet.defaultextent@0.0.2/dist/leaflet.defaultextent.js"></script>
		<script src="https://unpkg.com/leaflet-html-legend@0.3.0/dist/L.Control.HtmlLegend.js"></script>
		<script src="https://unpkg.com/leaflet-easybutton@2.3.0/src/easy-button.js"></script>

		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<$wp-themes/><!-- Wordpress Style Sheets -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

		<script type="text/javascript" src="https://code.highcharts.com/stock/5.0.12/highstock.js"></script>
		<script type="text/javascript" src="https://code.highcharts.com/stock/5.0.12/highcharts-more.js"></script>
		<script type="text/javascript" src="https://code.highcharts.com/stock/modules/exporting.js"></script>

		<script type="text/javascript" src="mvc-highstock.js"></script>
		<!--link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"-->

		<link rel="stylesheet" href="mvc-highstock.css"/>
		<link rel="stylesheet" href="../watershed-conditions-message/watershed-conditions-message.css"/>
		<link rel="stylesheet" href="water-levels.css"/>
	</head>
	<body class="hazard-on">
		<$wp-header/>
		<$wp-content>
			<div id="mvca-map"></div>
			<div id="graph-modal" class="modal fade" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">
								&times;
							</button>
							<h4 class="modal-title">
								<span id="gauge-name"></span>
								|
								<ul class="nav nav-pills" id="mvc-data-tab">
									<li class="nav-item">
										<a id="mvc-tab-graph-tab" class="nav-link active" href="#mvc-tab-graph" data-toggle="tab">
											Graph Data
										</a>
									</li>
									<li class="nav-item">
										<a id="mvc-tab-table-tab" class="nav-link" href="#mvc-tab-table" data-toggle="tab">
											Table Data
										</a>
									</li>
								</ul>
							</h4>
						</div>
						<div class="modal-body">
							<div id="mvc-data-tab-content" class="tab-content">
								<div id="mvc-tab-graph" class="tab-pane fade active">
									<div id="chart-content" >
										<h3>
											Now Loading...
										</h3>
									</div>
								</div>
								<div id="mvc-tab-table" class="tab-pane fade">
									<div class="mvc-table-range-container">
										View Data
										<div id="mvc-from" class="mvc-range-selector">
											From: 
										</div>
										<div class="mvc-range-selector mvc-table">
											<input type="text" name="min" class="mvc-range-selector mvc-table" value="" pattern="\d{3}\d+-(0[1-9]|1[0-2])-([0][1-9]|[1-2][0-9]|3[0-1])"/>
											<text class="pseudo-input">
												<span>
													
												</span>
											</text>
										</div>
										<div id="mvc-to" class="mvc-range-selector">
											To: 
										</div>
										<div class="mvc-range-selector">
											<input type="text" name="max" class="mvc-range-selector mvc-table" value="" pattern="\d{3}\d+-(0[1-9]|1[0-2])-([0][1-9]|[1-2][0-9]|3[0-1])"/>
											<text class="pseudo-input">
												<span>
													
												</span>
											</text>
										</div>
									</div>
									<div id="table-content">
										<h3>
											Now Loading...
										</h3>
									</div>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<!--Download Data 
-							<div id="mvc-from" class="mvc-range-selector">
-								From: 
-							</div>
-							<div class="mvc-range-selector">
-								<input type="text" name="min" class="mvc-range-selector" value="" data-prev="" pattern="\d{3}\d+-(0[1-9]|1[0-2])-([0][1-9]|[1-2][0-9]|3[0-1])"/>
-								<text class="pseudo-input">
-									<span>
-										
-									</span>
-								</text>
-							</div>
-							<div id="mvc-to" class="mvc-range-selector">
-								To: 
-							</div>
-							<div class="mvc-range-selector">
-								<input type="text" name="max" class="mvc-range-selector" value="" data-prev="" pattern="\d{3}\d+-(0[1-9]|1[0-2])-([0][1-9]|[1-2][0-9]|3[0-1])"/>
-								<text class="pseudo-input">
-									<span>
-										
-									</span>
-								</text>
-							</div>
-							<button type="button" class="download" data-mvc-target="#table-modal .modal-footer input.mvc-range-selector">
-								&nbsp; Download CSV
-							</button>-->
							<button type="button" class="" data-dismiss="modal">
								Close
							</button>
						</div>
					</div>
				</div>
			</div>
			<div id="help-modal" class="modal fade" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">
								&times;
							</button>
							<h4 class="modal-title">
								Help
							</h4>
						</div>
						<div class="modal-body">
							<!--How to view level/flow data-->
							<div>
								<h5>
									Viewing a Gauge's Most Recent Data
								</h5>
								<span>
									In order to view a gauge's most recent data, you must first locate the marker of the gauge you would like to view on the map.  
									If the gauge marker is not visible, try zooming in or clicking on nearby clusters; it is possible that the gauge marker was
									too close to another gauge marker and that it has simply been clustered together with it.  Once you have located the gauge 
									marker of the desired gauge, click on it to open the gauge's popup screen.  After data has loaded, you will be able to see the 
									most recent data for the gauge in the white circle to the left of the gauge marker in the popup.  If the border around the 
									white circle is displayed in red, this means that the most recent data for this gauge is out of date, and that the gauge may be 
									experiencing technical difficulties.  If the white circle contains a Conservation Ontario logo, this means that the gauge you 
									are looking at is not currently being measured and has no data associated with it at this point in time.
								</span>
							</div>
							<div>
								<h5>
									Viewing all of a Gauge's Data
								</h5>
								<span>
									If you would like to view a gauge's readings from any given date, rather than just its most recent reading, you must again 
									first locate the marker of the gauge you would like to view on the map and click on the marker to open its popup.  To the right
									 of the gauge marker, you will see a group of circles with coloured icons in them.  These circles are buttons for different 
									measurements associated with this gauge.  You may use the map legend for more details on what each button icon means.  Each 
									button may appear as one of 3 different colours: green, red, or white.  If the button icon and border are green, then the gauge
									 data for this measurement is up to date and will reflect the current measurements of this gauge.  If the button icon and 
									border are red, then the gauge data is not up to date and 
									<span class="mvc-bold">
										may not
									</span>
									accurately represent the current measurements of the area.  If the button icon is white, but the border colour of the button is
									 red or green, then you are currently hovering over the button with your mouse; the button icon will return to its original 
									colour once you move your mouse off of the button.  If instead the button icon is white, and the border colour is also white, 
									then the gauge's most recent data is still loading.  
									<span class="mvc-bold">
										The buttons will work regardless of whether or not the most recent data has loaded; the only difference will be the 
										button's colour.  
									</span>
									To view the data for one of the buttons, simply click on the button and a graph window will open.  From here, you can 
									change the range of data displayed in the graph using the range selector directly beneath the graph, or by directly entering 
									the date range you would like to view in the date inputs in the upper right corner of the graph.  Please note that the date 
									inputs may not be displayed if you are viewing the page on a device with a small screen size, such as a mobile phone.  In this
									 case, you 
									<span class="mvc-bold">
										must
									</span>
									use the range selector underneath the graph.  
								</span>
								<h6>
									Viewing Data in a Table Instead of a Graph
								</h6>
								<span>
									To view the gauge data in a table instead of a graph, click on the button that says "Table View" in the upper left of the 
									graph window.  This will display the gauge data using a table.  Please note that, for performance reasons, only a maximum of 1
									 year's worth of data may be viewed on the webpage.  In order to view data for a larger period, use the range selectors and 
									download button in the bottom-right corner of the table window.  This will download the table data as a csv file.  If the 
									download does not show up immediately after pressing the download button, please wait briefly as the csv data may still be 
									loading.
								</span>
							</div>
							<!--Viewing Subwatershed Conditions & Watershed Conditions Message-->
							<div>
								<h5>
									Viewing Subwatershed Conditions
								</h5>
								<span>
									To view the subwatershed condtions for a specific subwatershed, simply click on the subwatershed in question.  The conditions 
									will be displayed in the white circle of the popup that will appear.  Please note that this since subwatershed condition 
									colours all indicate at least 2 different conditions (1 for high and 1 for low), you may wish to check the subwatershed 
									conditions to make sure which one is in affect in your area.
								</span>
								<h6>
									Viewing the Watershed Conditions Message
								</h6>
								<span>
									You can also view the current watershed conditions message directly from this webpage by clicking on the subwatershed 
									conditions in the subwatershed's popup.
								</span>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="" data-dismiss="modal">
								Close
							</button>
						</div>
					</div>
				</div>
			</div>
			<div id="conditions-modal" class="modal fade" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">
								&times;
							</button>
							<h4 class="modal-title">
								<span class="mvc-cond-title"></span>
							</h4>
						</div>
						<div class="modal-body">
							<div class="mvc-cond-img"></div><!--div to display the image for the current conditions-->
							<div class="mvc-cond-content"></div><!--div to receive the text body of the message-->
						</div>
						<div class="modal-footer">
							<button type="button" class="" data-dismiss="modal">
								Close
							</button>
						</div>
					</div>
				</div>
			</div>
			<div id="disclaimer-modal" class="modal fade" data-backdrop="static" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title">
								Disclaimer: Provisional Data
							</h4>
						</div>
						<div class="modal-body">
							<div>
								<p>
									<em>
										The data contained within this database has not been formally reviewed or edited and may be subject to change.
									</em>
								</p>
								<p>
									<em>
										Publication or reproduction of the data contained within this website either wholly or in part without the
										expressed written consent of the Mississippi Valley Conservation is prohibited.
									</em>
								</p>
								<p>
									<em>
										Anyone using the data contained within this website is cautioned to carefully consider the provisional nature of
										this information and should not use it for making decisions that concern personal or public safety or the conduct
										of business that involves substantial monetary or operational consequences.
									</em>
								</p>
								<p>
									<em>
										Mississippi Valley Conservation and its employees, while providing this information in good faith, accepts no
										responsibility for any loss, damage, injury, or loss in value to any person, property, service or otherwise,
										resulting from its use.
									</em>
								</p>
								<p>
									For the official
									<a href="https://ec.gc.ca/rhc-wsc/default.asp?lang=En&n=9018B5EC-1" target="_blank">
										HYDAT
									</a>
									record of stream flows please contact:
									<br/>
									<span class="contacts">
										Environment Canada - Data Control and Client Services
									</span>
									<br/>
									<span class="contacts">
										<a href="mailto:EC.RHC-ON-WSC-ON.EC@CANADA.CA">
											Email
										</a>
									</span>
									<br/>
									<span class="contacts">
										905-319-6940
									</span>
								</p>
								<p>
									Or visit the
									<a href="https://wateroffice.ec.gc.ca/index_e.html" target="_blank">
										Water Survey of Canada Level and Flow Data
									</a>
									site.
								</p>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="" data-dismiss="modal">
								Close
							</button>
						</div>
					</div>
				</div>
			</div>
			<input type="button" id="disclaimer-button" class="mvc-button-automatic" data-toggle="modal" data-target="#disclaimer-modal" hidden=""/>
			<div id="range-alert-modal" class="modal fade mvc-notice" data-backdrop="static" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title">
								NOTICE:
							</h4>
						</div>
						<div class="modal-body">
							<div>
								<p>
									In order to conserve webpage performance, the largest range the online table will display is a full year.  
									To view a larger range of data, please download the data as a csv using the download button at the bottom of the table window.  
								</p>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="" data-dismiss="modal">
								Close
							</button>
						</div>
					</div>
				</div>
			</div>
			<input type="button" id="range-alert-button" class="mvc-button-automatic" data-toggle="modal" data-target="#range-alert-modal.mvc-notice" hidden=""/>
			<input type="button" id="help-button" class="mvc-button-automatic" data-toggle="modal" data-target="#help-modal" hidden=""/>
		</$wp-content>
		<$wp-footer/>
		<script>
			function loadTable() {};
			function loadGraph() {};
			init('table-content', 'chart-content');
		</script>
		<script src="water-levels.js"></script>
	</body>
</html>